Бронирование
============

Ограничения:
------------

* Запрещается создавать тестовое бронирование на основе нереальных паспортных данных. Например, нельзя вводить Иванов Иван Иванович, 1970-01-01, документ №11111111. В случае передачи подобной информации возможны штрафы.

Запрос
------

* Роут - /orders/booking
* HTTP метод запроса - POST

Параметры запроса:

1. **id** - *string*, обязательный. Идентификатор рекомендации, полученный при запросе списка рекомендаций.
2. **clientEmail** - *string*, обязательный. Email покупателя.
3. **clientPhone** - *string*, обязательный. Номер телефона покупателя, в формате +998XXXXXXXX.
4. **clientName** - *string*, обязательный. ФИО покупателя.
5. **clientBonusCard** - *string*, опциональный. Номер бонусной карты покупателя, в данный момент не используется.
6. **firstName** - *array*, обязательный. Имена пассажиров.
7. **lastName** - *array*, обязательный. Фамилии пассажиров.
8. **middleName** - *array*, опциональный. Отчества пассажиров.
9. **age** - *array*, обязательный. Возраст пассажиров. Допустимые значения указаны в [справочнике](guide.md).
10. **birthdate** - *array*, обязательный. Даты рождений пассажиров, в формате php:Y-m-d.
11. **docType** - *array*, обязательный. Типы документов по которым будет выполнено бронирование для каждого пассажира. Допустимые значения указаны в [справочнике](guide.md).
12. **docNumber** - *array*, обязательный. Номера документов по которым будет выполнено бронирование, должны содержать цифры и буквы в верхнем регистре.
13. **docExpiration** - *array*, обязательный. Сроки действия документнов по которым будет выполнено бронирование, в формате php:Y-m-d.
14. **gender** - *array*, обязательный. Пол пассажиров. Допустимые значения указаны в [справочнике](guide.md).
15. **citizenship** - *array*, обязательный. Гражданство пассажиров, код страны по стандарту ISO 3166-1 alpha-2.
16. **phone** - *array*, обязательный. Номера телефонов пассажиров, в формате +998XXXXXXXX.
17. **email** - *array*, опциональный. Email пассажиров.
18. **bonusCard** - *array*, опциональный. Номера бонусных карт пассажиров.

Пример запроса:

```php
$request = [
    'id' => '99563ad490edc64ef6f0ca0800d36187',
    'clientEmail' => 'salmin@example.com',
    'clientPhone' => '+998565004522',
    'clientName' => 'Тимофей',
    'clientBonusCard' => null,
    'firstName' => ['Tymofii', 'Alla'],
    'lastName' => ['Salmin', 'Petrova'],
    'middleName' => ['', ''],
    'age' => ['adt', 'adt'],
    'birthdate' => ['1983-01-06', '1985-10-12'],
    'docType' => ['A', 'A'],
    'docNumber' => ['ER56987', 'AR46182'],
    'docExpiration' => ['2022-11-25', '2023-05-14'],
    'gender' => ['M', 'F'],
    'citizenship' => ['UZ', 'RU'],
    'phone' => ['+998565004522', '+998565004522'],
    'email' => ['timofey@example.com', 'alla@example.com'],
    'bonusCard' => ['', ''],
];
```

Пример ответа:
--------------

```php
{
    "success":true,
    "date":"2020-03-17 18:14",
    "execution_time":8.029,
    "data":{
        "order":{ // данные заказа
            "id":2, // идентификатор заказа, используется при оплате
            "created":"2020-03-17 18:14", // дата и время создания заказа по Гринвичу
            "status":"booked", // текущий статус заказа, возможные значения указаны в справочнике
            "auto_cancellation":"2020-03-24 18:04", // дата и время автоотмены неоплаченного заказа по Гринвичу
            "price":{ // данные стоимости заказа
                "UZS":{ // валюта стоимости, возможные значения указаны в справочнике
                    "total":3198484, // общая стоимость заказа
                }
            },
            "client":{ // данные клиента (покупателя)
                "name":"Тимофей", // имя
                "email":"salmin@salmin.com", // email
                "phone":"+380730247742", // номер телефона
                "bonus_card":null // номер бонусной карты, в данный момент не используется
            },
            "tickets":[ // международный код бронирования
                {
                    "pnr":"3291TM", // код PNR
                }
            ],
            "passengers":[ // данные пассажиров
                {
                    "id":283109, // идентификатор
                    "first_name":"Tymofii", // имя
                    "middle_name":null, // отчество
                    "last_name":"Salmin", // фамилия
                    "email":"salmin@salmin.com", // email
                    "phone":"+380730247742", // номер телефона
                    "gender":"M", // пол
                    "birthdate":"1977-01-06", // дата рождения
                    "citizenship":"UA", // гражданство
                    "age":"adt", // возраст, возможные значения указаны в справочнике
                    "key":"SALMIN_TYMOFII_ER56987_06-01-1977",
                    "doc_type":"A", // документ для бронирования, возможные значения указаны в справочнике
                    "doc_number":"ER56987", // номер документа
                    "doc_expire":"2021-11-25", // срок действия документа
                    "bonus_card":null, // номер бонусной карты
                    "ticket_number":null, // номер билета, будет назначен после оплаты
                    "ticket_price":1599175 // стоимость билета
                },{
                    "id":283110,
                    "first_name":"Alla",
                    "middle_name":null,
                    "last_name":"Petrova",
                    "email":"salmin@salmin.com",
                    "phone":"+380730247742",
                    "gender":"F",
                    "birthdate":"1983-10-12",
                    "citizenship":"UA",
                    "age":"adt",
                    "key":"PETROVA_ALLA_AR46182_12-10-1983",
                    "doc_type":"A",
                    "doc_number":"AR46182",
                    "doc_expire":"2021-11-14",
                    "bonus_card":null,
                    "ticket_number":null,
                    "ticket_price":1599309
                }
            ],
            "directions":[ // направления перелетов
                ... // структура и данные идентичны элементу directions при запросе списка рекомендаций
            ],
            "rules":[ // правила тарифа для сегментов перелета
                ... // структура и данные идентичны элементу rules при запросе данных и условий тарифа для отдельной рекомендации
            ],
        }
    }
}
```